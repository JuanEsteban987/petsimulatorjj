<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sistema 2008 + Comandos Visibles</title>
  <style>
    /* ===== EST√âTICA 2008 ===== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: #7799bb;
      background-image: radial-gradient(circle at 20% 30%, #b0c4de, #4f6f8f);
      font-family: 'Tahoma', 'Lucida Grande', 'Verdana', sans-serif;
      padding: 30px 0 50px 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    .ventana-2008 {
      width: 960px;
      max-width: 98%;
      background: #e8eef4;
      border: 2px solid #ffffff;
      outline: 1px solid #3a5f7a;
      border-radius: 12px;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5), inset 0 1px 4px #ffffff;
      padding: 18px 20px 20px 20px;
    }

    .cabecera {
      margin-bottom: 18px;
      position: relative;
      border-bottom: 1px solid #b3c9db;
      padding-bottom: 8px;
    }

    .cabecera h1 {
      font-size: 32px;
      font-weight: bold;
      color: #2a3f5e;
      text-shadow: 2px 2px 0 #d0e0f0, 3px 3px 3px rgba(0,0,0,0.2);
      font-family: 'Arial Black', 'Gadget', sans-serif;
      display: inline-block;
      background: linear-gradient(to bottom, #eef5fc, #c2d4e8);
      padding: 0 15px 5px 10px;
      border-radius: 30px 10px 10px 30px;
      border: 1px solid #acc3db;
      box-shadow: inset 0 1px 3px white, 0 3px 5px rgba(0,0,0,0.2);
    }

    .cabecera h1 span {
      font-size: 18px;
      color: #ffd966;
      text-shadow: 1px 1px 0 #a64d00;
      background: #2f5575;
      padding: 3px 12px;
      border-radius: 30px;
      margin-left: 15px;
      border: 1px solid #ffbf47;
      box-shadow: inset 0 1px 2px #f9e5b3, 0 2px 3px #0f1f2f;
      display: inline-block;
    }

    .badge {
      float: right;
      background: #c00c0c;
      color: #fff9d7;
      font-weight: bold;
      font-size: 14px;
      padding: 5px 12px;
      border-radius: 30px 5px 30px 5px;
      border: 1px solid #febb8f;
      box-shadow: 0 3px 5px #3a2e2e, inset 0 1px 5px #fdd3a2;
      text-transform: uppercase;
      margin-top: 8px;
      transform: rotate(1deg);
    }

    .editor-box, .escenario-box, .console-box, .comandos-box {
      background: #dae5f0;
      border: 2px inset #aabbcc;
      border-radius: 8px;
      padding: 12px 12px 8px 12px;
      margin: 15px 0 10px 0;
      box-shadow: inset 1px 1px 5px #48647c, 0 4px 6px rgba(0,0,0,0.2);
    }

    .etiqueta {
      display: block;
      font-weight: bold;
      color: #163856;
      text-shadow: 0 1px 0 white;
      margin-bottom: 6px;
      font-size: 15px;
      letter-spacing: 0.5px;
      text-transform: uppercase;
      background: linear-gradient(to right, #c7daf0, transparent);
      padding: 2px 0 2px 8px;
      border-left: 5px solid #1e6fa8;
    }

    textarea#codigo {
      width: 100%;
      background: #f0f5fd;
      border: 3px inset #5f7a9a;
      padding: 10px;
      font-family: 'Courier New', 'Courier', monospace;
      font-size: 15px;
      color: #001c33;
      resize: vertical;
      box-shadow: inset 2px 2px 8px #2f4965, 0 2px 2px #a1b9d4;
      border-radius: 8px;
      line-height: 1.4;
    }

    canvas#escenario {
      display: block;
      width: 100%;
      height: auto;
      background: #0a1828;
      border: 4px inset #3d5a73;
      border-radius: 6px;
      box-shadow: 0 0 0 2px #90a9c4, inset 0 0 10px #000000;
      cursor: crosshair;
    }

    .toolbar {
      display: flex;
      gap: 15px;
      margin: 18px 0 16px 0;
      flex-wrap: wrap;
    }

    .btn-glossy {
      border: none;
      background: transparent;
      padding: 0;
      cursor: pointer;
      outline: none;
      flex: 0 1 auto;
    }

    .btn-glossy .inner {
      display: block;
      padding: 10px 32px;
      background: linear-gradient(to bottom, #60b0f0, #1d5c9e);
      border: 2px solid #d7eaff;
      border-radius: 40px 12px 40px 12px;
      color: white;
      font-size: 18px;
      font-weight: bold;
      text-shadow: 0 2px 3px #0b1f33;
      box-shadow: 0 5px 0 #10324f, 0 8px 12px rgba(0,0,0,0.3), inset 0 2px 5px #c5e2ff;
      transition: all 0.1s ease;
      font-family: 'Arial', 'Helvetica', sans-serif;
      letter-spacing: 1px;
      position: relative;
    }

    .btn-glossy .inner::after {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 45%;
      background: linear-gradient(to bottom, rgba(255, 255, 255, 0.7), rgba(255, 255, 255, 0.1));
      border-radius: 40px 12px 0 0;
      pointer-events: none;
    }

    .btn-glossy:active .inner {
      transform: translateY(4px);
      box-shadow: 0 1px 0 #10324f, 0 5px 8px rgba(0,0,0,0.3);
    }

    #clear .inner, #clearScene .inner, #comandosBtn .inner {
      background: linear-gradient(to bottom, #a5b8cb, #5b6f87);
      box-shadow: 0 5px 0 #2b3b4b, 0 8px 12px rgba(0,0,0,0.3), inset 0 2px 5px #e1edfa;
      text-shadow: 0 2px 3px #141c28;
    }

    /* Panel de comandos desplegable */
    .comandos-box {
      display: none;  /* oculto por defecto */
      margin-top: 20px;
      background: #e2ebf3;
      border: 2px ridge #6b8eb0;
    }
    .comandos-box.visible {
      display: block;
    }
    .comandos-grid {
      display: grid;
      grid-template-columns: 1fr 2fr 2fr;
      gap: 8px;
      font-size: 13px;
      margin-bottom: 8px;
    }
    .comandos-grid div {
      padding: 6px 8px;
      background: #f0f6fc;
      border: 1px solid #9bb7d4;
      border-radius: 6px;
      font-family: 'Courier New', monospace;
    }
    .comandos-grid .header {
      background: #2f5575;
      color: white;
      font-weight: bold;
      text-transform: uppercase;
      border: 1px solid #1d3450;
    }
    .cerrar-comandos {
      text-align: right;
      margin-top: 8px;
    }
    .cerrar-comandos span {
      background: #9b2f2f;
      color: #ffdbaa;
      padding: 4px 12px;
      border-radius: 30px;
      font-weight: bold;
      cursor: pointer;
      border: 1px solid #ffbaba;
      box-shadow: inset 0 1px 3px #ffcfcf, 0 2px 3px black;
      font-size: 14px;
    }
    .cerrar-comandos span:hover {
      background: #b33f3f;
    }

    .console-box {
      background: #cbd7e6;
    }

    #output {
      background: #fafcfd;
      border: 3px inset #506886;
      min-height: 130px;
      max-height: 250px;
      overflow: auto;
      padding: 10px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      color: #031a2b;
      border-radius: 6px;
      box-shadow: inset 0 0 0 2px #d5e3f0, inset 2px 2px 8px #3f4f64;
      white-space: pre-wrap;
    }

    .footer-2008 {
      margin-top: 20px;
      text-align: right;
      font-size: 13px;
      color: #2e4b6b;
      text-shadow: 0 1px 0 #b7cde0;
      border-top: 1px dashed #7089a5;
      padding-top: 6px;
      font-style: italic;
    }

    .footer-2008 span {
      background: #27435f;
      color: #eaf3fc;
      padding: 2px 10px;
      border-radius: 20px 0 20px 0;
    }
    .reflejo {
      width: 120px;
      height: 12px;
      background: linear-gradient(to right, transparent, white, transparent);
      margin-top: -12px;
      margin-left: 40px;
      opacity: 0.4;
      border-radius: 50%;
    }
  </style>
</head>
<body>
<div class="ventana-2008">

  <!-- CABECERA -->
  <div class="cabecera">
    <h1>PROG-2008 <span>gr√°ficos + comandos</span></h1>
    <div class="badge">ayuda integrada</div>
    <div class="reflejo"></div>
    <div style="clear:both"></div>
  </div>

  <!-- EDITOR -->
  <div class="editor-box">
    <label class="etiqueta">‚úé Editor JavaScript (con ejemplos gr√°ficos)</label>
    <textarea id="codigo" rows="8">// --- PRUEBA LAS FUNCIONES GR√ÅFICAS ---
limpiarEscenario();  // fondo negro

dibujarRect(50, 30, 80, 60, "#FFAA33");
dibujarCirculo(180, 70, 30, "#44AAFF");
dibujarLinea(250, 20, 350, 120, "#FF55AA");
dibujarTexto("CLICK EN COMANDOS", 400, 80, "#99FF99");

console.log("‚úÖ Objetos creados");</textarea>
  </div>

  <!-- ESCENARIO (canvas) -->
  <div class="escenario-box">
    <label class="etiqueta">üé¨ ESCENARIO (crea objetos aqu√≠)</label>
    <canvas id="escenario" width="600" height="200"></canvas>
    <div style="margin-top: 6px; font-size: 12px; color: #1f3c5a; text-align: right;">
      <i>funciones: dibujarRect, dibujarCirculo, dibujarLinea, dibujarTexto, cambiarFondo, limpiarEscenario</i>
    </div>
  </div>

  <!-- BARRA DE BOTONES (incluye COMANDOS) -->
  <div class="toolbar">
    <button class="btn-glossy" id="run"><span class="inner">‚ñ∂ EJECUTAR</span></button>
    <button class="btn-glossy" id="clear"><span class="inner">‚åß LIMPIAR CONSOLA</span></button>
    <button class="btn-glossy" id="clearScene"><span class="inner">üóëÔ∏è LIMPIAR ESCENARIO</span></button>
    <button class="btn-glossy" id="comandosBtn"><span class="inner">üìö COMANDOS</span></button>
  </div>

  <!-- PANEL DE COMANDOS (oculto inicialmente) -->
  <div id="panelComandos" class="comandos-box">
    <div class="etiqueta">üìã TODOS LOS COMANDOS Y EJEMPLOS</div>
    <div class="comandos-grid">
      <div class="header">FUNCI√ìN</div>
      <div class="header">DESCRIPCI√ìN</div>
      <div class="header">EJEMPLO</div>

      <div>dibujarRect(x, y, w, h, color)</div><div>Rect√°ngulo relleno</div><div>dibujarRect(10,10,50,30,"#FF0000")</div>
      <div>dibujarCirculo(x, y, radio, color)</div><div>C√≠rculo relleno</div><div>dibujarCirculo(80,50,25,"#00CCFF")</div>
      <div>dibujarLinea(x1,y1,x2,y2,color)</div><div>L√≠nea de grosor 3px</div><div>dibujarLinea(10,80,150,120,"#FFAA00")</div>
      <div>dibujarTexto("texto", x, y, color)</div><div>Texto en negrita 16px</div><div>dibujarTexto("Hola", 200,50,"#AAFFAA")</div>
      <div>cambiarFondo(color)</div><div>Cambia el fondo del escenario</div><div>cambiarFondo("#330066")</div>
      <div>limpiarEscenario()</div><div>Restaura fondo negro</div><div>limpiarEscenario()</div>
    </div>
    <div class="cerrar-comandos">
      <span id="cerrarComandos">‚úñ CERRAR AYUDA</span>
    </div>
  </div>

  <!-- CONSOLA -->
  <div class="console-box">
    <label class="etiqueta">üìü Consola (output)</label>
    <div id="output"></div>
    <div style="margin-top:6px; font-size:12px; color:#2d4968; text-align:right">[listo]</div>
  </div>

  <!-- PIE -->
  <div class="footer-2008">
    <span>‚ìí 2008  Comandos siempre a la vista ¬∑ Todos los derechos reservados</span>
  </div>
</div>

<!-- ========== SISTEMA DE PROGRAMACI√ìN + ESCENARIO + COMANDOS ========== -->
<script>
  (function() {
    // ---- ELEMENTOS DEL DOM ----
    var outputEl = document.getElementById('output');
    var runBtn = document.getElementById('run');
    var clearBtn = document.getElementById('clear');
    var clearSceneBtn = document.getElementById('clearScene');
    var comandosBtn = document.getElementById('comandosBtn');
    var panelComandos = document.getElementById('panelComandos');
    var cerrarComandos = document.getElementById('cerrarComandos');
    var codeEl = document.getElementById('codigo');
    var canvas = document.getElementById('escenario');
    var ctx = canvas.getContext('2d');

    // ---- FUNCIONES GR√ÅFICAS ----
    function limpiarEscenario() {
      ctx.fillStyle = '#0a1828';
      ctx.fillRect(0, 0, canvas.width, canvas.height);
    }
    limpiarEscenario(); // fondo inicial

    window.dibujarRect = function(x, y, w, h, color) {
      ctx.fillStyle = color || '#FFCC00';
      ctx.fillRect(x, y, w, h);
    };
    window.dibujarCirculo = function(x, y, r, color) {
      ctx.beginPath();
      ctx.arc(x, y, r, 0, Math.PI * 2);
      ctx.fillStyle = color || '#33CCFF';
      ctx.fill();
    };
    window.dibujarLinea = function(x1, y1, x2, y2, color) {
      ctx.beginPath();
      ctx.moveTo(x1, y1);
      ctx.lineTo(x2, y2);
      ctx.strokeStyle = color || '#FF66AA';
      ctx.lineWidth = 3;
      ctx.stroke();
    };
    window.dibujarTexto = function(texto, x, y, color) {
      ctx.font = 'bold 16px "Courier New", Courier, monospace';
      ctx.fillStyle = color || '#AAFFAA';
      ctx.fillText(texto, x, y);
    };
    window.cambiarFondo = function(color) {
      ctx.fillStyle = color || '#0a1828';
      ctx.fillRect(0, 0, canvas.width, canvas.height);
    };
    window.limpiarEscenario = limpiarEscenario;

    // ---- CONSOLA PERSONALIZADA ----
    var originalLog = console.log;
    var originalError = console.error;
    var originalWarn = console.warn;

    console.log = function() {
      var args = Array.prototype.slice.call(arguments).map(function(arg) {
        if (arg === null) return 'null';
        if (arg === undefined) return 'undefined';
        if (typeof arg === 'object') {
          try { return JSON.stringify(arg); } catch (e) { return arg.toString(); }
        }
        return arg;
      }).join(' ');
      outputEl.innerHTML += args + '<br>';
    };

    console.error = function() {
      var args = Array.prototype.slice.call(arguments).map(function(arg) {
        if (typeof arg === 'object') {
          try { return JSON.stringify(arg); } catch (e) { return arg.toString(); }
        }
        return arg;
      }).join(' ');
      outputEl.innerHTML += '<span style="color:#b00; background:#fee; padding:0 4px; border-radius:4px;">‚õî ERROR: ' + args + '</span><br>';
    };

    console.warn = function() {
      var args = Array.prototype.slice.call(arguments).map(function(arg) {
        if (typeof arg === 'object') {
          try { return JSON.stringify(arg); } catch (e) { return arg.toString(); }
        }
        return arg;
      }).join(' ');
      outputEl.innerHTML += '<span style="color:#a35d00; background:#fff1cf; padding:0 4px; border-radius:4px;">‚ö†Ô∏è ADVERTENCIA: ' + args + '</span><br>';
    };

    window.onerror = function(mensaje, url, linea) {
      outputEl.innerHTML += '<span style="color:white; background:#c22; padding:2px 8px; border-radius:12px; font-weight:bold;">‚ùå Error fatality: ' + mensaje + ' (l√≠nea ' + linea + ')</span><br>';
      return true;
    };

    // ---- EJECUTAR ----
    function ejecutar() {
      outputEl.innerHTML = '';
      var codigo = codeEl.value;
      if (codigo.trim() === '') {
        console.log('¬°Escribe c√≥digo para ejecutar!');
        return;
      }
      try {
        window.eval(codigo);
      } catch (e) {
        console.error(e.name + ': ' + e.message);
      }
    }

    // ---- LIMPIAR CONSOLA ----
    function limpiarConsola() {
      outputEl.innerHTML = '';
      outputEl.innerHTML = '> Consola limpiada. Listo.\n';
    }

    // ---- LIMPIAR ESCENARIO ----
    function limpiarEscenarioHandler() {
      limpiarEscenario();
      outputEl.innerHTML += 'üóëÔ∏è Escenario limpiado.\n';
    }

    // ---- MOSTRAR/OCULTAR PANEL DE COMANDOS ----
    function toggleComandos() {
      panelComandos.classList.toggle('visible');
    }

    // ---- EVENTOS ----
    runBtn.addEventListener('click', ejecutar);
    clearBtn.addEventListener('click', limpiarConsola);
    clearSceneBtn.addEventListener('click', limpiarEscenarioHandler);
    comandosBtn.addEventListener('click', toggleComandos);
    cerrarComandos.addEventListener('click', function() {
      panelComandos.classList.remove('visible');
    });

    // Atajo Ctrl+Enter
    codeEl.addEventListener('keydown', function(e) {
      if (e.ctrlKey && e.key === 'Enter') {
        e.preventDefault();
        ejecutar();
      }
    });

    // Mensaje inicial
    outputEl.innerHTML = '> Sistema 2008 listo. Presiona "COMANDOS" para ver todas las funciones gr√°ficas.\n';
    console.log('‚úì Escenario interactivo y ayuda integrada.');
  })();
</script>

<!-- toque 2008 flotante -->
<div style="position:fixed; bottom:10px; left:10px; opacity:0.2; filter:blur(2px);">‚ú™ 2008 ‚ú™</div>
</body>
</html>

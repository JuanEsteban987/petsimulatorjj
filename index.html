<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sistema de Programaci√≥n 2008 + Escenario</title>
  <style>
    /* ===== EST√âTICA 2008 (GLOSSY, BORDES REDONDEADOS, SOMBRAS) ===== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: #7799bb;
      background-image: radial-gradient(circle at 20% 30%, #b0c4de, #4f6f8f);
      font-family: 'Tahoma', 'Lucida Grande', 'Verdana', sans-serif;
      padding: 30px 0 50px 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    .ventana-2008 {
      width: 960px;
      max-width: 98%;
      background: #e8eef4;
      border: 2px solid #ffffff;
      outline: 1px solid #3a5f7a;
      border-radius: 12px;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5), inset 0 1px 4px #ffffff;
      padding: 18px 20px 20px 20px;
    }

    .cabecera {
      margin-bottom: 18px;
      position: relative;
      border-bottom: 1px solid #b3c9db;
      padding-bottom: 8px;
    }

    .cabecera h1 {
      font-size: 32px;
      font-weight: bold;
      color: #2a3f5e;
      text-shadow: 2px 2px 0 #d0e0f0, 3px 3px 3px rgba(0,0,0,0.2);
      letter-spacing: -0.5px;
      font-family: 'Arial Black', 'Gadget', sans-serif;
      display: inline-block;
      background: linear-gradient(to bottom, #eef5fc, #c2d4e8);
      padding: 0 15px 5px 10px;
      border-radius: 30px 10px 10px 30px;
      border: 1px solid #acc3db;
      box-shadow: inset 0 1px 3px white, 0 3px 5px rgba(0,0,0,0.2);
    }

    .cabecera h1 span {
      font-size: 18px;
      color: #ffd966;
      text-shadow: 1px 1px 0 #a64d00;
      background: #2f5575;
      padding: 3px 12px;
      border-radius: 30px;
      margin-left: 15px;
      border: 1px solid #ffbf47;
      box-shadow: inset 0 1px 2px #f9e5b3, 0 2px 3px #0f1f2f;
      display: inline-block;
    }

    .badge {
      float: right;
      background: #c00c0c;
      color: #fff9d7;
      font-weight: bold;
      font-size: 14px;
      padding: 5px 12px;
      border-radius: 30px 5px 30px 5px;
      border: 1px solid #febb8f;
      box-shadow: 0 3px 5px #3a2e2e, inset 0 1px 5px #fdd3a2;
      text-transform: uppercase;
      margin-top: 8px;
      transform: rotate(1deg);
    }

    .editor-box, .escenario-box, .console-box {
      background: #dae5f0;
      border: 2px inset #aabbcc;
      border-radius: 8px;
      padding: 12px 12px 8px 12px;
      margin: 15px 0 10px 0;
      box-shadow: inset 1px 1px 5px #48647c, 0 4px 6px rgba(0,0,0,0.2);
    }

    .etiqueta {
      display: block;
      font-weight: bold;
      color: #163856;
      text-shadow: 0 1px 0 white;
      margin-bottom: 6px;
      font-size: 15px;
      letter-spacing: 0.5px;
      text-transform: uppercase;
      background: linear-gradient(to right, #c7daf0, transparent);
      padding: 2px 0 2px 8px;
      border-left: 5px solid #1e6fa8;
    }

    textarea#codigo {
      width: 100%;
      background: #f0f5fd;
      border: 3px inset #5f7a9a;
      padding: 10px;
      font-family: 'Courier New', 'Courier', monospace;
      font-size: 15px;
      color: #001c33;
      resize: vertical;
      box-shadow: inset 2px 2px 8px #2f4965, 0 2px 2px #a1b9d4;
      border-radius: 8px;
      line-height: 1.4;
    }

    /* Canvas con estilo monitor retro */
    canvas#escenario {
      display: block;
      width: 100%;
      height: auto;
      background: #0a1828;  /* color de fondo por defecto (ser√° sobrescrito por JS) */
      border: 4px inset #3d5a73;
      border-radius: 6px;
      box-shadow: 0 0 0 2px #90a9c4, inset 0 0 10px #000000;
      cursor: crosshair;
    }

    .toolbar {
      display: flex;
      gap: 15px;
      margin: 18px 0 16px 0;
      flex-wrap: wrap;
    }

    .btn-glossy {
      border: none;
      background: transparent;
      padding: 0;
      cursor: pointer;
      outline: none;
      flex: 0 1 auto;
    }

    .btn-glossy .inner {
      display: block;
      padding: 10px 32px;
      background: #3a7bb5;
      background: linear-gradient(to bottom, #60b0f0, #1d5c9e);
      border: 2px solid #d7eaff;
      border-radius: 40px 12px 40px 12px;
      color: white;
      font-size: 18px;
      font-weight: bold;
      text-shadow: 0 2px 3px #0b1f33;
      box-shadow: 0 5px 0 #10324f, 0 8px 12px rgba(0,0,0,0.3), inset 0 2px 5px #c5e2ff;
      transition: all 0.1s ease;
      font-family: 'Arial', 'Helvetica', sans-serif;
      letter-spacing: 1px;
      position: relative;
    }

    .btn-glossy .inner::after {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 45%;
      background: linear-gradient(to bottom, rgba(255, 255, 255, 0.7), rgba(255, 255, 255, 0.1));
      border-radius: 40px 12px 0 0;
      pointer-events: none;
    }

    .btn-glossy:active .inner {
      transform: translateY(4px);
      box-shadow: 0 1px 0 #10324f, 0 5px 8px rgba(0,0,0,0.3);
    }

    #clear, #clearScene {
      margin-left: 5px;
    }
    #clear .inner, #clearScene .inner {
      background: linear-gradient(to bottom, #a5b8cb, #5b6f87);
      box-shadow: 0 5px 0 #2b3b4b, 0 8px 12px rgba(0,0,0,0.3), inset 0 2px 5px #e1edfa;
      text-shadow: 0 2px 3px #141c28;
    }

    .console-box {
      background: #cbd7e6;
    }

    #output {
      background: #fafcfd;
      border: 3px inset #506886;
      min-height: 130px;
      max-height: 250px;
      overflow: auto;
      padding: 10px;
      font-family: 'Courier New', 'Courier', monospace;
      font-size: 14px;
      color: #031a2b;
      border-radius: 6px;
      box-shadow: inset 0 0 0 2px #d5e3f0, inset 2px 2px 8px #3f4f64;
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    .footer-2008 {
      margin-top: 20px;
      text-align: right;
      font-size: 13px;
      color: #2e4b6b;
      text-shadow: 0 1px 0 #b7cde0;
      border-top: 1px dashed #7089a5;
      padding-top: 6px;
      font-style: italic;
    }

    .footer-2008 span {
      background: #27435f;
      color: #eaf3fc;
      padding: 2px 10px;
      border-radius: 20px 0 20px 0;
    }

    .reflejo {
      width: 120px;
      height: 12px;
      background: linear-gradient(to right, transparent, white, transparent);
      margin-top: -12px;
      margin-left: 40px;
      opacity: 0.4;
      border-radius: 50%;
    }
  </style>
</head>
<body>
<div class="ventana-2008">

  <!-- CABECERA -->
  <div class="cabecera">
    <h1>PROG-2008 <span>escenario 2.0</span></h1>
    <div class="badge">gr√°ficos ¬∑ objetos</div>
    <div class="reflejo"></div>
    <div style="clear:both"></div>
  </div>

  <!-- EDITOR DE C√ìDIGO (ahora con ejemplos de dibujo) -->
  <div class="editor-box">
    <label class="etiqueta">‚úé Editor JavaScript (2008) ‚Äî crea objetos en el escenario</label>
    <textarea id="codigo" rows="8">// --- DIBUJA EN EL ESCENARIO (funciones disponibles) ---
// limpiarEscenario()  - fondo negro
// dibujarRect(x, y, ancho, alto, color)
// dibujarCirculo(x, y, radio, color)
// dibujarLinea(x1, y1, x2, y2, color)
// dibujarTexto("texto", x, y, color)
// cambiarFondo(color)  - ej: "navy", "#330066"

limpiarEscenario();  // borra el canvas

// Dibujamos el sol (un c√≠rculo amarillo)
dibujarCirculo(100, 80, 40, "#FFD966");

// Un rect√°ngulo que parece edificio
dibujarRect(200, 70, 80, 100, "#4A86E8");

// L√≠nea a modo de rayo l√°ser
dibujarLinea(300, 30, 380, 150, "#FF5555");

// Texto retro
dibujarTexto("Hola 2008!", 400, 120, "#33FF99");

// M√°s objetos: un √°rbol sencillo
dibujarRect(500, 120, 20, 60, "#8B4513");       // tronco
dibujarCirculo(510, 80, 25, "#2E7D32");         // copa

console.log("‚úÖ Escenario pintado con objetos 2008");</textarea>
  </div>

  <!-- ESCENARIO (canvas) para crear objetos visuales -->
  <div class="escenario-box">
    <label class="etiqueta">üé¨ ESCENARIO (crea objetos: rect, c√≠rculo, l√≠nea, texto)</label>
    <canvas id="escenario" width="600" height="200"></canvas>
    <!-- peque√±a leyenda -->
    <div style="margin-top: 6px; font-size: 12px; color: #1f3c5a; text-align: right;">
      <i>funciones: dibujarRect, dibujarCirculo, dibujarLinea, dibujarTexto, cambiarFondo, limpiarEscenario</i>
    </div>
  </div>

  <!-- BARRA DE BOTONES GLOSSY -->
  <div class="toolbar">
    <button class="btn-glossy" id="run">
      <span class="inner">‚ñ∂ EJECUTAR</span>
    </button>
    <button class="btn-glossy" id="clear">
      <span class="inner">‚åß LIMPIAR CONSOLA</span>
    </button>
    <button class="btn-glossy" id="clearScene">
      <span class="inner">üóëÔ∏è LIMPIAR ESCENARIO</span>
    </button>
  </div>

  <!-- CONSOLA DE SALIDA -->
  <div class="console-box">
    <label class="etiqueta">üìü Consola (output)</label>
    <div id="output"></div>
    <div style="margin-top:6px; font-size:12px; color:#2d4968; text-align:right">[listo]</div>
  </div>

  <!-- PIE -->
  <div class="footer-2008">
    <span>‚ìí 2008  Gr√°ficos en tiempo real ¬∑ Todos los derechos reservados</span>
  </div>

</div>

<!-- ========== SISTEMA DE PROGRAMACI√ìN + ESCENARIO ========== -->
<script>
  (function() {
    // ---- ELEMENTOS DEL DOM ----
    var outputEl = document.getElementById('output');
    var runBtn = document.getElementById('run');
    var clearBtn = document.getElementById('clear');
    var clearSceneBtn = document.getElementById('clearScene');
    var codeEl = document.getElementById('codigo');
    var canvas = document.getElementById('escenario');
    var ctx = canvas.getContext('2d');

    // ---- CONFIGURACI√ìN INICIAL DEL ESCENARIO (fondo negro) ----
    function limpiarEscenario() {
      ctx.fillStyle = '#0a1828';   // azul noche
      ctx.fillRect(0, 0, canvas.width, canvas.height);
    }
    limpiarEscenario(); // fondo por defecto

    // ---- FUNCIONES GR√ÅFICAS GLOBALES (para que el usuario las use en su c√≥digo) ----
    window.dibujarRect = function(x, y, w, h, color) {
      ctx.fillStyle = color || '#FFCC00';
      ctx.fillRect(x, y, w, h);
    };

    window.dibujarCirculo = function(x, y, r, color) {
      ctx.beginPath();
      ctx.arc(x, y, r, 0, Math.PI * 2);
      ctx.fillStyle = color || '#33CCFF';
      ctx.fill();
    };

    window.dibujarLinea = function(x1, y1, x2, y2, color) {
      ctx.beginPath();
      ctx.moveTo(x1, y1);
      ctx.lineTo(x2, y2);
      ctx.strokeStyle = color || '#FF66AA';
      ctx.lineWidth = 3;
      ctx.stroke();
    };

    window.dibujarTexto = function(texto, x, y, color) {
      ctx.font = 'bold 16px "Courier New", Courier, monospace';
      ctx.fillStyle = color || '#AAFFAA';
      ctx.fillText(texto, x, y);
    };

    window.cambiarFondo = function(color) {
      ctx.fillStyle = color || '#0a1828';
      ctx.fillRect(0, 0, canvas.width, canvas.height);
    };

    window.limpiarEscenario = limpiarEscenario;  // alias

    // ---- SOBREESCRITURA DE CONSOLA (para capturar en el div output) ----
    var originalLog = console.log;
    var originalError = console.error;
    var originalWarn = console.warn;

    console.log = function() {
      var args = Array.prototype.slice.call(arguments).map(function(arg) {
        if (arg === null) return 'null';
        if (arg === undefined) return 'undefined';
        if (typeof arg === 'object') {
          try { return JSON.stringify(arg); } catch (e) { return arg.toString(); }
        }
        return arg;
      }).join(' ');
      outputEl.innerHTML += args + '<br>';
    };

    console.error = function() {
      var args = Array.prototype.slice.call(arguments).map(function(arg) {
        if (typeof arg === 'object') {
          try { return JSON.stringify(arg); } catch (e) { return arg.toString(); }
        }
        return arg;
      }).join(' ');
      outputEl.innerHTML += '<span style="color:#b00; background:#fee; padding:0 4px; border-radius:4px;">‚õî ERROR: ' + args + '</span><br>';
    };

    console.warn = function() {
      var args = Array.prototype.slice.call(arguments).map(function(arg) {
        if (typeof arg === 'object') {
          try { return JSON.stringify(arg); } catch (e) { return arg.toString(); }
        }
        return arg;
      }).join(' ');
      outputEl.innerHTML += '<span style="color:#a35d00; background:#fff1cf; padding:0 4px; border-radius:4px;">‚ö†Ô∏è ADVERTENCIA: ' + args + '</span><br>';
    };

    window.onerror = function(mensaje, url, linea) {
      outputEl.innerHTML += '<span style="color:white; background:#c22; padding:2px 8px; border-radius:12px; font-weight:bold;">‚ùå Error fatality: ' + mensaje + ' (l√≠nea ' + linea + ')</span><br>';
      return true;
    };

    // ---- FUNCI√ìN EJECUTAR (run) ----
    function ejecutar() {
      outputEl.innerHTML = '';  // limpia consola

      var codigo = codeEl.value;
      if (codigo.trim() === '') {
        console.log('¬°Escribe c√≥digo para ejecutar!');
        return;
      }

      try {
        window.eval(codigo);
      } catch (e) {
        console.error(e.name + ': ' + e.message);
      }
    }

    // ---- LIMPIAR CONSOLA (solo texto) ----
    function limpiarConsola() {
      outputEl.innerHTML = '';
      outputEl.innerHTML = '> Consola limpiada. Listo.\n';
    }

    // ---- LIMPIAR ESCENARIO (canvas) ----
    function limpiarEscenarioHandler() {
      limpiarEscenario();
      outputEl.innerHTML += 'üóëÔ∏è Escenario limpiado.\n';
    }

    // ---- ASIGNAR EVENTOS ----
    runBtn.addEventListener('click', ejecutar);
    clearBtn.addEventListener('click', limpiarConsola);
    clearSceneBtn.addEventListener('click', limpiarEscenarioHandler);

    // ---- ATAJO Ctrl+Enter ----
    codeEl.addEventListener('keydown', function(e) {
      if (e.ctrlKey && e.key === 'Enter') {
        e.preventDefault();
        ejecutar();
      }
    });

    // ---- MENSAJE INICIAL ----
    outputEl.innerHTML = '> Sistema de programaci√≥n 2008 con escenario listo.\n> Usa las funciones gr√°ficas: dibujarRect, dibujarCirculo, dibujarLinea, dibujarTexto, cambiarFondo, limpiarEscenario.\n';
    console.log('‚úì Escenario interactivo preparado. ¬°A dibujar!');
  })();
</script>

<!-- peque√±o destello flotante (puro sabor 2008) -->
<div style="position:fixed; bottom:10px; left:10px; opacity:0.2; filter:blur(2px);">‚ú™ 2008 ‚ú™</div>
</body>
</html>
